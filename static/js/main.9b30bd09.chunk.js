(this["webpackJsonpuser-auth-redux"]=this["webpackJsonpuser-auth-redux"]||[]).push([[0],{167:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(23),r=n.n(a),o=n(16),s=n(5),i=n(6),u=n.n(i),j=n(4),l=n(1),b=function(e){return Object(l.jsx)("div",{className:"home_heading",children:Object(l.jsx)("h1",{children:" User Authentication with Redux  "})})},d=n(13),h=n(32),O=n.n(h),p=n(17),m=n.n(p),f=function(e){return{type:"REMOVE_NOTE",payload:e}},g=function(e){return{type:"ADD_NOTE",payload:e}},x=function(e){return{type:"GET_NOTES",payload:e}},v=function(e){return{type:"ADD_INFO",payload:e}},y=function(e){return{type:"SET_USER",payload:e}},E=function(){return{type:"TOGGLE_LOGIN"}},S=function(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(""),i=Object(d.a)(o,2),j=i[0],b=i[1],h=Object(c.useState)(""),p=Object(d.a)(h,2),f=p[0],g=p[1],x=Object(c.useState)({}),v=Object(d.a)(x,2),E=(v[0],v[1]),S={},w=Object(s.b)(),k=function(e){"username"===e.target.name?r(e.target.value):"email"===e.target.name?b(e.target.value):"password"===e.target.name&&g(e.target.value)};return Object(l.jsxs)("div",{className:"register_div",children:[Object(l.jsx)("h2",{children:" Register with us "}),Object(l.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),0===a.trim().length||0===j.trim().length?(S.empty="Field cannot be left blank",u()("Check empty fields","","error")):O.a.isEmail(j)||(S.email="Invalid E-Mail format",u()("Invalid E-Mail format","","error")),0===Object.keys(S).length){E({});w((n={username:a,email:j,password:f},c=function(){e.history.push("/login")},function(e){m.a.post("http://dct-user-auth.herokuapp.com/users/register",n).then((function(t){var n=t.data;n.hasOwnProperty("errors")?u()(n.message):(e(y(n)),c(),u()("Successfully created an account!","","success"))})).catch((function(e){u()(e.message)}))})),r(""),g(""),b("")}else E(S),0===a.trim().length||0===j.trim().length?u()("Check empty fields","","error"):O.a.isEmail(j)||u()("Invalid E-Mail format","","error");var n,c},children:[Object(l.jsx)("input",{type:"text",placeholder:"enter username",value:a,onChange:k,name:"username"}),"  ",Object(l.jsx)("br",{})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",placeholder:"enter email",value:j,onChange:k,name:"email"})," ",Object(l.jsx)("br",{})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"password",placeholder:"enter password",value:f,onChange:k,name:"password"})," ",Object(l.jsx)("br",{})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit"})]})]})},w=function(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(""),i=Object(d.a)(o,2),j=i[0],b=i[1],h=Object(s.b)(),O=function(e){"email"===e.target.name?r(e.target.value):"password"===e.target.name&&b(e.target.value)};return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n,c;h((n={email:a,password:j},c=function(){e.history.push("/")},function(e){m.a.post("http://dct-user-auth.herokuapp.com/users/login",n).then((function(t){var n=t.data;n.hasOwnProperty("errors")?u()({title:"Error Detected",text:n.errors,icon:"error"}):(localStorage.setItem("token",n.token),e(E()),c(),u()("Successfully logged in!","","success"))})).catch((function(e){console.log(e.message)}))}))},children:[Object(l.jsx)("input",{type:"text",placeholder:"Enter E-Mail",value:a,onChange:O,name:"email"})," ",Object(l.jsx)("br",{})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"password",placeholder:"Enter Password",value:j,onChange:O,name:"password"})," ",Object(l.jsx)("br",{})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit"})]})})},k=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.user}));return Object(c.useEffect)((function(){t((function(e){m.a.get("http://dct-user-auth.herokuapp.com/users/account",{headers:{"x-auth":localStorage.getItem("token")}}).then((function(t){var n=t.data;console.log(n),e(v(n))})).catch((function(e){alert(e.message)}))}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:" User Account "}),Object(l.jsxs)("p",{children:[" E-Mail : ",n.email,"  "]}),Object(l.jsxs)("p",{children:[" Username : ",n.username," "]})]})},_=function(e){var t=Object(s.b)(),n=Object(c.useState)(""),a=Object(d.a)(n,2),r=a[0],o=a[1],i=Object(c.useState)(""),u=Object(d.a)(i,2),j=u[0],b=u[1],h=function(e){"title"===e.target.name?o(e.target.value):"body"===e.target.name&&b(e.target.value)};return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:function(e){var n;e.preventDefault(),t((n={title:r,body:j},console.log("hello"),function(e){m.a.post("http://dct-user-auth.herokuapp.com/api/notes",n,{headers:{"x-auth":localStorage.getItem("token")}}).then((function(t){var n=t.data;e(g(n))})).catch((function(e){alert(e.message)}))})),o(""),b("")},children:[Object(l.jsx)("h3",{children:" Add Note "}),Object(l.jsx)("input",{type:"text",placeholder:"Enter Note Title",value:r,name:"title",onChange:h})," ",Object(l.jsx)("br",{})," ",Object(l.jsx)("br",{}),Object(l.jsx)("textarea",{name:"body",value:j,onChange:h,placeholder:"Enter note here... ",cols:"20",rows:"10",children:" "})," ",Object(l.jsx)("br",{})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit",value:"Save"})]})})},N=n(15),I=function(e){var t=e._id,n=e.title,c=e.body,a=Object(s.b)();return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h4",{onClick:function(){u()({title:n,text:c,icon:"info"})},children:[" ",n," "]}),Object(l.jsx)("button",{onClick:function(){var e;a((e=t,function(t){window.confirm("Are you sure?")&&m.a.delete("http://dct-user-auth.herokuapp.com/api/notes/".concat(e),{headers:{"x-auth":localStorage.getItem("token")}}).then((function(e){var n=e.data;t(f(n._id))})).catch((function(e){alert(e.message)}))}))},children:" Delete "})]})},T=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.notes}));return Object(c.useEffect)((function(){t((function(e){m.a.get("http://dct-user-auth.herokuapp.com/api/notes",{headers:{"x-auth":localStorage.getItem("token")}}).then((function(t){var n=t.data;e(x(n))}))}))}),[]),Object(l.jsx)("div",{children:Object(l.jsx)("ul",{children:n.map((function(e){return Object(l.jsxs)("li",{children:[" ",Object(l.jsx)(I,Object(N.a)({},e))," "]},e._id)}))})})},D=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)(_,{}),Object(l.jsx)(T,{})]})},C=Object(j.e)((function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.loggedIn}));return Object(l.jsxs)("div",{className:"container-fluid",children:[Object(l.jsxs)("div",{className:"topnav",children:[Object(l.jsx)(o.b,{to:"/",children:" Home "}),n?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o.b,{to:"/account",children:" Account "}),Object(l.jsx)(o.b,{to:"/mynotes",children:" My Notes "}),Object(l.jsx)(o.b,{to:"/",onClick:function(){t({type:"REMOVE_TOKEN"}),t(E()),localStorage.removeItem("token"),u()("Successfully logged out!","","success"),e.history.push("/")},children:" Logout "})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o.b,{to:"/register",children:" Register "}),Object(l.jsx)(o.b,{to:"/login",children:" Login "})]})]}),Object(l.jsx)(j.a,{path:"/",component:b,exact:!0}),Object(l.jsx)(j.a,{path:"/register",component:S}),Object(l.jsx)(j.a,{path:"/login",component:w}),Object(l.jsx)(j.a,{path:"/account",component:k}),Object(l.jsx)(j.a,{path:"/mynotes",component:D})]})})),A=function(e){return Object(l.jsx)("div",{children:Object(l.jsx)(C,{})})},M=n(26),G=n(60),R=n(14),L=[],F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return[].concat(Object(R.a)(e),[Object(N.a)({},t.payload)]);default:return Object(R.a)(e)}},U={},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INFO":return Object(N.a)({},t.payload);default:return Object(N.a)({},e)}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_LOGIN":return!e;default:return e}},J=[],B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTE":return[].concat(Object(R.a)(e),[Object(N.a)({},t.payload)]);case"GET_NOTES":return[].concat(Object(R.a)(t.payload),Object(R.a)(e));case"REMOVE_NOTE":var n=Object(R.a)(e).filter((function(e){return e._id!==t.payload}));return Object(R.a)(n);default:return Object(R.a)(e)}},H=function(){return Object(M.c)(Object(M.b)({users:F,loggedIn:V,user:P,notes:B}),Object(M.a)(G.a))},K=(n(166),n(167),H());console.log("state",K.getState()),K.subscribe((function(){console.log("state updated",K.getState())})),r.a.render(Object(l.jsx)(s.a,{store:K,children:Object(l.jsx)(o.a,{children:Object(l.jsx)(A,{})})}),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.9b30bd09.chunk.js.map